body { font-family: Inter, Arial, sans-serif; background:#f6f8fb; color:#111; margin:18px; }
h1,h2 { color:#222; margin:6px 0 10px; }
section { margin-bottom: 20px; }

.player-form input, .structure-form input, .structure-form select {
  padding:6px; border:1px solid #ccc; border-radius:8px; margin:4px;
}
button { padding:8px 12px; border:none; border-radius:8px; cursor:pointer; background:#0b74de; color:#fff; }
button.ghost { background:#eceff4; color:#111; }
button.danger { background:#e74c3c; }
button:disabled { opacity:0.6; cursor:not-allowed; }

.tabs { display:flex; gap:6px; margin:8px 0; flex-wrap:wrap; }
.tab { padding:6px 10px; border-radius:8px; background:#eceff4; cursor:pointer; }
.tab.active { background:#0b74de; color:#fff; font-weight:600; }

.player-card { background:#fff; border-radius:10px; padding:10px; box-shadow:0 4px 14px rgba(0,0,0,.06); border:1px solid #e6e9ef; }

table { width:100%; border-collapse:collapse; background:#fff; border-radius:10px; overflow:hidden; box-shadow:0 4px 14px rgba(0,0,0,.05); }
th,td { border:1px solid #e6e9ef; padding:8px; text-align:center; font-size:14px; }
th { background:#f0f2f7; }

.year-bar { display:flex; gap:10px; align-items:center; margin:10px 0; }

.borgo-values label { margin-right: 14px; }

.log { background:#fff; border:1px solid #e6e9ef; border-radius:10px; padding:10px; height:220px; overflow:auto; }

.slider-block { margin:8px 0; }
.slider-block input[type=range]{ width:300px; }

.modal.hidden { display:none; }
.modal { position:fixed; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:999; }
.modal .modal-content { background:#fff; padding:18px; border-radius:12px; width:90%; max-width:820px; box-shadow:0 6px 30px rgba(0,0,0,.25); }
.close { float:right; font-weight:bold; font-size:22px; cursor:pointer; }

.modal {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal.hidden { display: none; }

.modal-content {
  background: #fff;
  border-radius: 8px;
  padding: 20px;
  width: 80%;
  max-width: 900px;
  max-height: 70vh;   /* <-- finestra più piccola */
  overflow-y: auto;   /* <-- scroll verticale */
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

.modal-content table {
  width: 100%;
  border-collapse: collapse;
}

.modal-content th,
.modal-content td {
  border: 1px solid #ccc;
  padding: 4px 6px;
  text-align: center;
}

.close {
  float: right;
  font-size: 20px;
  cursor: pointer;
}

.leaderboard{
  border:1px solid #ddd;
  border-radius:10px;
  padding:10px;
  margin:10px 0 20px;
  background:#fff;
}

.leader-row{
  display:flex;
  justify-content:space-between;
  gap:10px;
  padding:8px 10px;
  border-radius:8px;
  margin:6px 0;
  font-weight:600;
}

.leader-row small{
  font-weight:400;
  opacity:0.85;
}

.leader-1{ background:rgba(255, 215, 0, 0.18); }
.leader-2{ background:rgba(192, 192, 192, 0.22); }
.leader-3{ background:rgba(205, 127, 50, 0.22); }
.leader-other{ background:rgba(0,0,0,0.04); }

/* =========================
   MOBILE OPTIMIZATION
   ========================= */
@media (max-width: 820px){

  body{
    padding: 12px;
  }

  h1{ font-size: 20px; }
  h2{ font-size: 16px; margin-top: 14px; }

  /* Form in colonna */
  .player-form, .structure-form{
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .player-form input,
  .structure-form input,
  .structure-form select{
    width: 100%;
    font-size: 16px; /* evita zoom automatico iOS */
    padding: 10px;
  }

  /* Barra simulazione: va a righe */
  .year-bar{
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
  }

  .year-bar button{
    flex: 1 1 48%;
    min-height: 44px; /* target touch */
    font-size: 14px;
  }

  /* Tabs giocatori */
  .tabs{
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding-bottom: 8px;
  }
  .tabs button{
    white-space: nowrap;
    min-height: 42px;
    padding: 8px 12px;
    font-size: 14px;
  }

  /* Card player più leggibile */
  .player-card{
    padding: 12px;
    font-size: 14px;
  }

  /* Wrapper per tabella: scroll orizzontale */
  .table-wrap{
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    border: 1px solid rgba(0,0,0,0.12);
    border-radius: 10px;
  }

  #structuresTable{
    min-width: 980px; /* forza scroll invece di “rompere” */
  }

  /* Input dentro tabella più comodi */
  #structuresTable input,
  #structuresTable select{
    font-size: 16px;
    padding: 8px;
    min-height: 40px;
  }

  /* Bottoni azioni più touch-friendly */
  button, .ghost, .danger{
    min-height: 42px;
  }

  /* Log: altezza controllata */
  .log{
    max-height: 40vh;
    overflow: auto;
  }

  /* Classifica */
  .leaderboard{
    padding: 10px;
    border: 1px solid rgba(0,0,0,0.12);
    border-radius: 10px;
  }
}

@media (max-width: 820px){
  #structuresTable td:last-child{
    white-space: normal;
  }
  #structuresTable td:last-child button{
    margin: 2px 2px;
  }
}

#structuresTable td, #structuresTable th{
  color: #111;
}

/* Nasconde l'header alto della scheda player SOLO ai player (non al master) */
body.is-player #playerCard > div:first-child,
body.is-player #playerCard > div:nth-child(2),
body.is-player #playerCard > div:nth-child(3){
  display: none;
}

/* Nasconde tutta la scheda player ai player (non al master) */
body.is-player #playerCard{
  display: none;
}


/* =========================
   SIMULAZIONE — VISIBILITÀ PLAYER
   ========================= */

/* I player NON vedono i pulsanti master */
body.is-player .sim-master-only{
  display: none !important;
}

/* Mantieni ordinata la barra simulazione */
body.is-player .year-bar{
  gap: 8px;
  flex-wrap: wrap;
}
