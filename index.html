<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Borgo Turismo â€” v7.8 (stabile)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <h1>Borgo Turismo â€” v8.0</h1>

  <!-- ===== GIOCATORI ===== -->
  <section>
    <h2>Giocatori</h2>
    <form id="add-player-form" class="player-form">
      <input id="player-name" type="text" placeholder="Nome giocatore" required>
      <input id="player-budget" type="number" placeholder="Budget iniziale (â‚¬)" min="0" required>
      <button type="submit">Aggiungi Giocatore</button>
    </form>

    <div id="playersTabs" class="tabs"></div>

    <div id="playerCard" class="player-card"></div>
    <div class="player-controls">
      <button id="removePlayerBtn" class="danger">Rimuovi giocatore</button>
      <button id="showPlayerHistoryBtn" class="ghost">Storico Giocatore</button>
    </div>
  </section>

  <hr>

  <!-- ===== STRUTTURE ===== -->
  <section>
    <h2>Strutture</h2>

    <form id="add-structure-form" class="structure-form">
      <input id="struct-name" type="text" placeholder="Nome struttura" required>
      <select id="struct-borgo">
        <option>Montepulciano</option>
        <option>San Gimignano</option>
        <option>Chianciano</option>
        <option>Pienza</option>
        <option>Siena</option>
      </select>
      <label>QualitÃ  <input id="struct-qualita" type="number" min="1" max="5" value="3"></label>
      <label>Pulizie <input id="struct-pulizie" type="number" min="1" max="3" value="2"></label>
      <label>Camere <input id="struct-camere" type="number" min="1" max="50" value="3"></label>
      <label>Piscina
        <select id="struct-piscina"><option value="no">No</option><option value="si">SÃ¬</option></select>
      </label>
      <label>Prezzo â‚¬/notte <input id="struct-prezzo" type="number" min="10" step="5" value="120"></label>
      <button type="submit">Aggiungi al giocatore attivo</button>
    </form>

  <!-- ðŸ”½ ORDINAMENTO STRUTTURE -->
  <div style="display:flex;gap:10px;align-items:center;margin:10px 0;">
    <label>Ordina per:
      <select id="structuresSort">
        <option value="structAsc">Nome Struttura (Aâ†’Z)</option>
        <option value="structDesc">Nome Struttura (Zâ†’A)</option>
        <option value="ownerAsc">Nome Player (Aâ†’Z)</option>
        <option value="ownerDesc">Nome Player (Zâ†’A)</option>
<option value="borgoAsc">Borgo (Aâ†’Z)</option>
<option value="borgoDesc">Borgo (Zâ†’A)</option>
      </select>
    </label>
  </div>

<!-- âœ… WRAPPER per mobile -->
<div class="table-wrap">
    <table id="structuresTable">
      <thead>
        <tr>
          <th>#</th><th>Proprietario</th><th>Borgo</th><th>Nome</th>
          <th>QualitÃ </th><th>Pulizie</th><th>Camere</th><th>Piscina</th>
          <th>Prezzo</th><th>Notti</th><th>Occupancy</th><th>Recensioni</th>
          <th>Fatturato</th><th>Azioni</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
</div>
  </section>

  <hr>

  <!-- ===== SIMULAZIONE ===== -->
  <section>
    <h2>Simulazione</h2>
    <div class="year-bar">
      Mese: <strong id="monthLabel">1</strong> (<span id="monthName">Gennaio</span>)
      â€” Anno: <strong id="yearLabel">1</strong>
      <button id="btnCalcMonth">Calcola mese</button>
      <button id="btnNextMonth" class="ghost">Mese successivo</button>
      <button id="btnShowAnnual" class="ghost">Report annuale</button>
      <button id="saveBtn">Salva</button>
      <button id="loadBtn">Carica</button>
      <button id="newGameBtn" class="danger">Nuova Partita</button>
    </div>
  </section>

  <!-- ===== VALORE BORGHI ===== -->
  <section>
    <h2>Valore dei Borghi</h2>
    <div class="borgo-values">
      <label>Montepulciano <input id="wMon" type="number" step="0.05" value="1.0"></label>
      <label>San Gimignano <input id="wSan" type="number" step="0.05" value="2.0"></label>
      <label>Chianciano <input id="wChi" type="number" step="0.05" value="0.7"></label>
      <label>Pienza <input id="wPie" type="number" step="0.05" value="1.5"></label>
      <label>Siena <input id="wSie" type="number" step="0.05" value="1.8"></label>
    </div>
  </section>

<hr>

<!-- ===== CLASSIFICA ===== -->
<section>
  <h2>Classifica Patrimonio</h2>
  <div id="leaderboard" class="leaderboard"></div>
</section>

<hr>

<!-- ===== LOG ===== -->
<section>
  <h2>Log</h2>
  <div id="reportLog" class="log"></div>
</section>

  <hr>

  <!-- ===== PARAMETRI (Admin, in basso) ===== -->
  <section id="paramsSection">
    <h2>Parametri di simulazione (admin)</h2>

    <div class="slider-block">
      Prezzo â†’ Domanda: <span id="priceSensLabel">1.8</span>
      <input type="range" id="priceSens" min="0.6" max="3" step="0.1" value="1.8">
    </div>
    <div class="slider-block">
      Prezzo â†’ Recensioni: <span id="priceRevSensLabel">0.9</span>
      <input type="range" id="priceRevSens" min="0.3" max="2" step="0.1" value="0.9">
    </div>
    <div class="slider-block">
      Review Bias: <span id="reviewBiasLabel">1.00</span>
      <input type="range" id="reviewBias" min="0.5" max="1.5" step="0.05" value="1.0">
    </div>
    <div class="slider-block">
      Spesa media ospiti (â‚¬): <span id="avgSpendLabel">120</span>
      <input type="range" id="avgSpend" min="70" max="500" step="10" value="120">
    </div>
    <div class="slider-block">
      Concorrenza locale: <span id="localCompetitionLabel">1.0</span>
      <input type="range" id="localCompetition" min="0.5" max="2" step="0.1" value="1.0">
    </div>
    <div class="slider-block">
      Peso Economy: <span id="segEconomyLabel">1.0</span>
      <input type="range" id="segEconomy" min="0.5" max="2" step="0.1" value="1.0">
    </div>
    <div class="slider-block">
      Peso Mid: <span id="segMidLabel">1.0</span>
      <input type="range" id="segMid" min="0.5" max="2" step="0.1" value="1.0">
    </div>
    <div class="slider-block">
      Peso Luxury: <span id="segLuxuryLabel">1.0</span>
      <input type="range" id="segLuxury" min="0.5" max="2" step="0.1" value="1.0">
    </div>
    <div class="slider-block">
      Occupancy Boost: <span id="occupancyBoostLabel">1.0</span>
      <input type="range" id="occupancyBoost" min="0.5" max="3" step="0.1" value="1.0">
    </div>
    <div class="slider-block">
      ProbabilitÃ  Evento Random mensile: <span id="monthEventProbLabel">8</span>%
      <input type="range" id="monthEventProb" min="0" max="100" step="2" value="8">
    </div>
  </section>

  <!-- ===== MODALI ===== -->
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <span id="modalClose" class="close">&times;</span>
      <div id="modalBody"></div>
    </div>
  </div>

  <div id="annualReportModal" class="modal hidden">
    <div class="modal-content">
      <span id="closeAnnualReport" class="close">&times;</span>
      <h3>Report Annuale</h3>
      <div id="annualReportContent"></div>
    </div>
  </div>


<!-- Firebase compat (namespace globale v8) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyC-ImgUlfUytWPf9RPjszzVLGhbjIj5dpI",
    authDomain: "borgoturismolive.firebaseapp.com",
    projectId: "borgoturismolive",
    storageBucket: "borgoturismolive.appspot.com",
    messagingSenderId: "906079573201",
    appId: "1:906079573201:web:9a69f7b9e31af9c4b4e1f0"
  };

  // evita doppia init
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  // opzionale: accesso globale se serve
  window.db = firebase.firestore();
</script>

<!-- Il tuo gioco (UNA SOLA VOLTA) -->
<script src="game.js"></script>

</body>
</html>